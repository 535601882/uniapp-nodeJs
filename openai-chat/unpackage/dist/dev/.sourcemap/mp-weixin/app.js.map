{"version":3,"file":"app.js","sources":["App.vue"],"sourcesContent":["<script>\r\nimport { globalUser } from '@/utils/global';\r\nimport { getUserApi } from '@/utils/api';\r\nexport default {\r\n\tonLaunch: function() {\r\n\t\tconsole.log('App Launch');\r\n\t\t// 小程序静默登录，获取code后请求后端换取openid\r\n\t\tuni.login({\r\n\t\t\tprovider: 'weixin',\r\n\t\t\tsuccess: (loginRes) => {\r\n\t\t\t\tconst code = loginRes.code;\r\n\t\t\t\tconsole.log(\"code\",code)\r\n\t\t\t\t// 假设后端有/api/wxlogin?code=xxx接口返回openid\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: import.meta.env.VITE_BASE_URL+'/api/wxlogin',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: { code },\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"res\",res)\r\n\t\t\t\t\t\tconst openid = res.data.openid;\r\n\t\t\t\t\t\tglobalUser.openid = openid;\r\n\t\t\t\t\t\tuni.setStorageSync('openid', openid);\r\n\t\t\t\t\t\tglobalUser.token = res.data.token;\r\n\t\t\t\t\t\t//refreshToken\r\n\t\t\t\t\t\tglobalUser.refreshToken = res.data.refreshToken;\r\n\t\t\t\t\t\tglobalUser.info = res.data;\r\n\t\t\t\t\t\tuni.setStorageSync('token', res.data.token);\r\n\t\t\t\t\t\tuni.setStorageSync('refreshToken', res.data.refreshToken);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tonShow: function() {\r\n\t\tconsole.log('App Show');\r\n\t},\r\n\tonHide: function() {\r\n\t\tconsole.log('App Hide');\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n\t/*每个页面公共css */\r\n</style>\r\n"],"names":["uni","globalUser"],"mappings":";;;;;;;AAGA,MAAK,YAAU;AAAA,EACd,UAAU,WAAW;AACRA,kBAAAA,MAAA,MAAA,OAAA,gBAAA,YAAY;AAExBA,kBAAAA,MAAI,MAAM;AAAA,MACT,UAAU;AAAA,MACV,SAAS,CAAC,aAAa;AACtB,cAAM,OAAO,SAAS;AACtBA,sBAAA,MAAY,MAAA,OAAA,iBAAA,QAAO,IAAI;AAEvBA,sBAAAA,MAAI,QAAQ;AAAA,UACX,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM,EAAE,KAAK;AAAA,UACb,SAAS,CAAC,QAAQ;AACjBA,0BAAA,oCAAY,OAAM,GAAG;AACf,kBAAA,SAAS,IAAI,KAAK;AACxBC,yBAAA,WAAW,SAAS;AAChBD,0BAAAA,MAAA,eAAe,UAAU,MAAM;AACxBC,yBAAAA,WAAA,QAAQ,IAAI,KAAK;AAEjBA,yBAAAA,WAAA,eAAe,IAAI,KAAK;AACnCA,oCAAW,OAAO,IAAI;AACtBD,0BAAA,MAAI,eAAe,SAAS,IAAI,KAAK,KAAK;AAC1CA,0BAAA,MAAI,eAAe,gBAAgB,IAAI,KAAK,YAAY;AAAA,UACzD;AAAA,QAAA,CACA;AAAA,MACF;AAAA,IAAA,CACA;AAAA,EACF;AAAA,EACA,QAAQ,WAAW;AAClBA,kBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAAA,EACvB;AAAA,EACA,QAAQ,WAAW;AAClBA,kBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAAA,EACvB;AACD;;;;;;;;;"}